## О сервисе сбора данных с Тестового Api

Этот сервис предназначен для загрузки данных из тестового API Wildberries и сохранения их в локальную базу данных.
Этот сервис загружает данные со следующих эндпоинтов:

- Продажи (/api/sales). Данные с данного эндпоинта сохраняются в таблице sales.
- Заказы (/api/orders). Данные с данного эндпоинта сохраняются в таблице orders.
- Складские остатки (/api/stocks). Данные с данного эндпоинта сохраняются в таблице stocks.
- Доходы (/api/incomes). Данные с данного эндпоинта сохраняются в таблице incomes.

## Подготовка и настройка сервиса

Для настройки сервиса:

- Скачать все файлы из данного репозитория.
- Установить все зависимости проекта (composer install).
- В файле .env указать данные для подключения к бд (стандартные для laravel).
- Также в файле .env указать API_BASE_URL(базовый путь до эндпойнтов) и API_KEY (ключ).
- Затем необходимо запустить миграции (php artisan migration).

## Запуск парсера
В консоли из корня приложения необходимо запустить команду:
> **php artisan app:load-wb-data {endpoints?*}**.

И затем ожидать завершения выполнения команды. В данной команде предусмотрен сбор данных с определенных эндпоинтов.
Если значения не указаны, то будет выполнен парсинг всех эндпоинтов.

## Очистка таблиц
Также предусмотрена команда для очистки таблиц от старых данных 
>**php artisan app:clear-wb-tables {endpoints?*}**. 

В данной команде предусмотрен очистка данных из таблиц свзяанных, с определенными эндпоинтами. 
Если значения не указаны, то будут очищены все таблицы.

## БД
host: FVH2.spaceweb.ru\
port: 3308\
login: kzsasha198\
password: EVT5CRQAL6#YC8rX

## Docker
Для проекта реализована контейнерная виртуализация с помощью docker и docker-compose. Для запуска проекта в
docker необходимо выполнить следующие шаги:
1. Перейти в корень проекта.
2. Запустить создание и запуск проекта:
   > docker-compose up
3. Дальше необходимо попасть внутрь docker контейнера:
   > docker exec -it laravel-cli /bin/bash
4. И за тем внутри контейнера можно запускать все необходимые команды (перечисленные выше).
5. Для просмотра полученных данных браузере можно перейти по адресу http://localhost:8081/ для просмотра 
данных в phpmyadmin.
